<map version="freeplane 1.8.0">
<!--To view this file, download free mind mapping software Freeplane from http://freeplane.sourceforge.net -->
<node TEXT="系统日志管理" FOLDED="false" ID="ID_39763279" CREATED="1606138986599" MODIFIED="1608380543976" STYLE="oval">
<font SIZE="18"/>
<hook NAME="MapStyle">
    <properties fit_to_viewport="false" edgeColorConfiguration="#808080ff,#ff0000ff,#0000ffff,#00ff00ff,#ff00ffff,#00ffffff,#7c0000ff,#00007cff,#007c00ff,#7c007cff,#007c7cff,#7c7c00ff"/>

<map_styles>
<stylenode LOCALIZED_TEXT="styles.root_node" STYLE="oval" UNIFORM_SHAPE="true" VGAP_QUANTITY="24.0 pt">
<font SIZE="24"/>
<stylenode LOCALIZED_TEXT="styles.predefined" POSITION="right" STYLE="bubble">
<stylenode LOCALIZED_TEXT="default" ICON_SIZE="12.0 pt" COLOR="#000000" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt" NUMBERED="true" BORDER_WIDTH="2.0 px">
<font NAME="微软雅黑" SIZE="12" BOLD="false" ITALIC="false"/>
<edge STYLE="horizontal"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.details" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt"/>
<stylenode LOCALIZED_TEXT="defaultstyle.attributes" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font SIZE="9"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.note" COLOR="#000000" BACKGROUND_COLOR="#ffffff" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt" TEXT_ALIGN="LEFT"/>
<stylenode LOCALIZED_TEXT="defaultstyle.floating">
<edge STYLE="hide_edge"/>
<cloud COLOR="#f0f0f0" SHAPE="ROUND_RECT"/>
</stylenode>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.user-defined" POSITION="right" STYLE="bubble">
<stylenode LOCALIZED_TEXT="styles.topic" COLOR="#18898b" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font NAME="Liberation Sans" SIZE="10" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.subtopic" COLOR="#cc3300" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font NAME="Liberation Sans" SIZE="10" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.subsubtopic" COLOR="#669900" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font NAME="Liberation Sans" SIZE="10" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.important" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<icon BUILTIN="yes"/>
</stylenode>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.AutomaticLayout" POSITION="right" STYLE="bubble">
<stylenode LOCALIZED_TEXT="AutomaticLayout.level.root" COLOR="#000000" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font SIZE="18"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,1" COLOR="#0033ff" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font SIZE="16"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,2" COLOR="#00b439" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font SIZE="14"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,3" COLOR="#990000" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,4" COLOR="#111111" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font SIZE="10"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,5" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt"/>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,6" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt"/>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,7" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt"/>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,8" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt"/>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,9" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt"/>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,10" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt"/>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,11" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt"/>
</stylenode>
</stylenode>
</map_styles>
</hook>
<hook NAME="AutomaticEdgeColor" COUNTER="8" RULE="ON_BRANCH_CREATION"/>
<node TEXT="作用" POSITION="right" ID="ID_913566763" CREATED="1606139015408" MODIFIED="1606139030758">
<edge COLOR="#00ff00"/>
<node TEXT="记录系统、程序运行中发生的各种事件" ID="ID_1471425080" CREATED="1606139032760" MODIFIED="1606139047855"/>
<node TEXT="通过查看日志、了解及排除故障" ID="ID_182982117" CREATED="1606139048030" MODIFIED="1606139063127"/>
<node TEXT="信息安全控制的“依据”" ID="ID_160219403" CREATED="1606139063342" MODIFIED="1606139095833"/>
</node>
<node TEXT="管理" POSITION="right" ID="ID_396349434" CREATED="1606139117253" MODIFIED="1606139717326">
<edge COLOR="#ff00ff"/>
<richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      由系统服务rsyslog统一记录/管理
    </p>
    <p>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;◦ 日志消息采用文本格式
    </p>
    <p>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;◦ 主要记录事件发生的时间、主机、进程、内容
    </p>
  </body>
</html>
</richcontent>
<node TEXT="常见日志文件" ID="ID_1779295158" CREATED="1606139924607" MODIFIED="1606139935996">
<node TEXT="/var/log/messages" ID="ID_1933951691" CREATED="1606139155066" MODIFIED="1606139236998"><richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      记录内核消息、各种服务的公共消息
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="/var/log/dmesg" ID="ID_279364843" CREATED="1606139168739" MODIFIED="1606139250363"><richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      记录系统启动过程的各种消息
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="/var/log/cron" ID="ID_358818306" CREATED="1606139178652" MODIFIED="1606139289147"><richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      记录与cron计划任务相关的消息
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="/var/log/maillog" ID="ID_1062197381" CREATED="1606139190318" MODIFIED="1606139316178"><richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      记录邮件收发相关的消息
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="/var/log/secure" ID="ID_1706876733" CREATED="1606139204358" MODIFIED="1606139342506"><richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      记录与访问限制相关的安全消息
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="用户日志" ID="ID_321429054" CREATED="1606139936871" MODIFIED="1606140020891"><richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      日志消息釆用二进制格式
    </p>
    <p>
      记录登录用户的时间、来源、执行的命令等信息
    </p>
  </body>
</html>
</richcontent>
<node TEXT="/var/log/lastlog" ID="ID_1154091548" CREATED="1606139959455" MODIFIED="1606140077035"><richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      记录最近的用户登录事件
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="/var/log/wtmp" ID="ID_1090706580" CREATED="1606140037244" MODIFIED="1606140094479"><richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      记录成功的用户登录/注销事件
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="/var/log/btmp" ID="ID_1982962223" CREATED="1606140043939" MODIFIED="1606140108274"><richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      记录失败的用户登录事件
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="/var/run/utmp" ID="ID_742487583" CREATED="1606140052843" MODIFIED="1606140127316"><richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      记录当前登录的每个用户的相关信息
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT="通用分析工具" POSITION="right" ID="ID_1563937843" CREATED="1606139349963" MODIFIED="1606139359690">
<edge COLOR="#00ffff"/>
<node TEXT="tail, tailf, less, grep等文本浏览/检索命令" ID="ID_1083053679" CREATED="1606139360549" MODIFIED="1606139448475"><richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      tailf, 实时跟踪
    </p>
    <p>
      tailf /opt/1.txt
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="awk, sed等格式化过滤工具" ID="ID_1543356419" CREATED="1606139388085" MODIFIED="1606139401730"/>
<node TEXT="user,who,w命令" ID="ID_70272791" CREATED="1606139462422" MODIFIED="1606139499391"><richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      查看已登录的用户信息,详细度不同
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="last, lastb命令" ID="ID_138290305" CREATED="1606139503647" MODIFIED="1606140271901"><richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      查看最近登录成功/失败的用户信息
    </p>
    <p>
      last -2&nbsp;&nbsp;查看最近登录的2条信息
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="专用分析工具" ID="ID_1869870981" CREATED="1606140148837" MODIFIED="1606140205777"><richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      Webmin系统管理套件
    </p>
    <p>
      Webalizer, AWStats等日志统计套件
    </p>
  </body>
</html>
</richcontent>
</node>
<node TEXT="journalctl" ID="ID_294395435" CREATED="1606140304127" MODIFIED="1606140433326"><richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      提取由systemd-journal服务搜集的日志
    </p>
    <p>
      主要包括内核/系统日志,服务日志
    </p>
    <p>
      journalctl | grep 关键词
    </p>
    <p>
      journalctl -u 服务名 [-p 优先级]
    </p>
    <p>
      journalctl -n 消息条数
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
<node TEXT="内核定义的时间紧急程度" POSITION="right" ID="ID_985472032" CREATED="1606139545727" MODIFIED="1606139556785">
<edge COLOR="#00007c"/>
<node TEXT="数值越小越紧急" ID="ID_1416825270" CREATED="1606139561047" MODIFIED="1606139600579"><richcontent TYPE="DETAILS">

<html>
  <head>
    
  </head>
  <body>
    <p>
      &nbsp;&nbsp;0&nbsp;&nbsp;EMERG（紧急）&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;会导致主机系统不可用的情况
    </p>
    <p>
      &nbsp;&nbsp;1&nbsp;&nbsp;ALERT（警告）&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;必须马上采取措施解决的问题
    </p>
    <p>
      &nbsp;&nbsp;2&nbsp;&nbsp;CRIT（严重）&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;比较严重的情况
    </p>
    <p>
      &nbsp;&nbsp;3&nbsp;&nbsp;ERR（错误）&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;运行出现错误
    </p>
    <p>
      &nbsp;&nbsp;4&nbsp;&nbsp;WARNING（提醒）&nbsp;&nbsp;&nbsp;&nbsp;可能会影响系统功能的事件
    </p>
    <p>
      &nbsp;&nbsp;5&nbsp;&nbsp;NOTICE（注意）&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;不会影响系统但值得注意
    </p>
    <p>
      &nbsp;&nbsp;6&nbsp;&nbsp;INFO（信息）&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;一般信息
    </p>
    <p>
      &nbsp;&nbsp;7&nbsp;&nbsp;DEBUG（调试）&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;程序或系统调试信息等
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
</map>
