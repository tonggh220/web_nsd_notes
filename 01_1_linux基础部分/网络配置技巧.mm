<map version="freeplane 1.8.0">
<!--To view this file, download free mind mapping software Freeplane from http://freeplane.sourceforge.net -->
<node TEXT="网络配置技巧" FOLDED="false" ID="ID_624660960" CREATED="1603949035194" MODIFIED="1608457624590" LINK="网络基础.mm" COLOR="#660033" STYLE="bubble">
<font NAME="微软雅黑" SIZE="20"/>
<edge STYLE="horizontal" COLOR="#990000" WIDTH="thin" DASH="SOLID"/>
<hook NAME="MapStyle" zoom="0.912">
    <properties fit_to_viewport="false" edgeColorConfiguration="#808080ff,#ff0000ff,#0000ffff,#00ff00ff,#ff00ffff,#00ffffff,#7c0000ff,#00007cff,#007c00ff,#7c007cff,#007c7cff,#7c7c00ff"/>

<map_styles>
<stylenode LOCALIZED_TEXT="styles.root_node" STYLE="oval" UNIFORM_SHAPE="true" VGAP_QUANTITY="24.0 pt">
<font SIZE="24"/>
<stylenode LOCALIZED_TEXT="styles.predefined" POSITION="right" STYLE="bubble">
<stylenode LOCALIZED_TEXT="default" ICON_SIZE="12.0 pt" COLOR="#000000" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt" NUMBERED="true" BORDER_WIDTH="2.0 px">
<font NAME="微软雅黑" SIZE="12" BOLD="false" ITALIC="false"/>
<edge STYLE="horizontal"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.details" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt"/>
<stylenode LOCALIZED_TEXT="defaultstyle.attributes" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font SIZE="9"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.note" COLOR="#000000" BACKGROUND_COLOR="#ffffff" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt" TEXT_ALIGN="LEFT"/>
<stylenode LOCALIZED_TEXT="defaultstyle.floating">
<edge STYLE="hide_edge"/>
<cloud COLOR="#f0f0f0" SHAPE="ROUND_RECT"/>
</stylenode>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.user-defined" POSITION="right" STYLE="bubble">
<stylenode LOCALIZED_TEXT="styles.topic" COLOR="#18898b" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font NAME="Liberation Sans" SIZE="10" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.subtopic" COLOR="#cc3300" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font NAME="Liberation Sans" SIZE="10" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.subsubtopic" COLOR="#669900" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font NAME="Liberation Sans" SIZE="10" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.important" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<icon BUILTIN="yes"/>
</stylenode>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.AutomaticLayout" POSITION="right" STYLE="bubble">
<stylenode LOCALIZED_TEXT="AutomaticLayout.level.root" COLOR="#000000" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font SIZE="18"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,1" COLOR="#0033ff" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font SIZE="16"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,2" COLOR="#00b439" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font SIZE="14"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,3" COLOR="#990000" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,4" COLOR="#111111" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font SIZE="10"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,5" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt"/>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,6" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt"/>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,7" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt"/>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,8" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt"/>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,9" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt"/>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,10" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt"/>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,11" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt"/>
</stylenode>
</stylenode>
</map_styles>
</hook>
<hook NAME="AutomaticEdgeColor" COUNTER="4" RULE="ON_BRANCH_CREATION"/>
<node TEXT="配置项" POSITION="right" ID="ID_652129585" CREATED="1604109558076" MODIFIED="1607593189441" COLOR="#000066" STYLE="bubble">
<font NAME="微软雅黑" SIZE="18"/>
<edge STYLE="horizontal"/>
<node TEXT="ip配置&#xa;同网段ip指网络位相同的ip" ID="ID_512370826" CREATED="1603949049388" MODIFIED="1607593189459" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node TEXT="子网掩码&#xa;可自定义配置.若不自定义&#xa;系统提供默认子网掩码" ID="ID_503822365" CREATED="1604109634291" MODIFIED="1607593189471" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node TEXT="网关配置&#xa;填写距离主机最近的接口的ip地址" ID="ID_251564044" CREATED="1603949061018" MODIFIED="1607593189473" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
</node>
<node TEXT="linux网络配置" POSITION="right" ID="ID_319536116" CREATED="1603959872602" MODIFIED="1607593189474" COLOR="#000066" STYLE="bubble">
<font NAME="微软雅黑" SIZE="18"/>
<edge STYLE="horizontal"/>
<node TEXT="查看网络信息" ID="ID_1305271144" CREATED="1603960086091" MODIFIED="1607593189521" COLOR="#666600" STYLE="bubble">
<font NAME="微软雅黑" SIZE="16"/>
<edge STYLE="horizontal"/>
<node TEXT="windows" ID="ID_1346832133" CREATED="1604109012456" MODIFIED="1607593189537" COLOR="#006666" STYLE="bubble">
<font NAME="微软雅黑" SIZE="14"/>
<edge STYLE="horizontal"/>
<node TEXT="ipconfig&#xa;现示ip,子网掩码,网关" ID="ID_1674340243" CREATED="1604109040766" MODIFIED="1607593189543" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node TEXT="ipconfig /all&#xa;现示ip,子网掩码,网关,DNS" ID="ID_513161025" CREATED="1604109054925" MODIFIED="1607593189544" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
</node>
<node TEXT="linux" ID="ID_831766834" CREATED="1604109068380" MODIFIED="1607593189545" COLOR="#006666" STYLE="bubble">
<font NAME="微软雅黑" SIZE="14"/>
<edge STYLE="horizontal"/>
<node TEXT="ifconfig&#xa;此命令包含在net-toos包中.&#xa;显示接口信息&#xa;ens33：真实网卡接口&#xa;lo：本地回环接口&#xa;virbr0：虚拟网卡接口" ID="ID_1188557216" CREATED="1604109081150" MODIFIED="1607593189551" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node TEXT="route -n&#xa;查看网关" ID="ID_572670080" CREATED="1604109328883" MODIFIED="1607593189554" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node TEXT="cat /etc/resolv..conf&#xa;查看dns" ID="ID_922784406" CREATED="1604109405764" MODIFIED="1607593189555" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
</node>
</node>
<node TEXT="设置网络" ID="ID_1010585498" CREATED="1603960380720" MODIFIED="1607593189556" COLOR="#666600" STYLE="bubble">
<font NAME="微软雅黑" SIZE="16"/>
<edge STYLE="horizontal"/>
<node TEXT="nmtui" ID="ID_435761022" CREATED="1604110480745" MODIFIED="1607593189576" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="14"/>
<edge STYLE="horizontal"/>
<node TEXT="手动配置" ID="ID_1315434211" CREATED="1604111779308" MODIFIED="1607593189580" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node TEXT="dhcp" ID="ID_692066426" CREATED="1604111789387" MODIFIED="1607593189581" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
</node>
<node TEXT="nmcli" ID="ID_856306933" CREATED="1605183836486" MODIFIED="1607593189581">
<edge STYLE="horizontal"/>
<node TEXT="查看主机网卡信息" ID="ID_1613514617" CREATED="1605185554999" MODIFIED="1608457321951">
<edge STYLE="horizontal"/>
<node TEXT="nmcli connection show" ID="ID_1169346480" CREATED="1608457315476" MODIFIED="1608457319128"/>
</node>
<node TEXT="删除网卡" ID="ID_1054179211" CREATED="1605185588068" MODIFIED="1608457332722">
<edge STYLE="horizontal"/>
<node TEXT="" ID="ID_1893052612" CREATED="1608457326093" MODIFIED="1608457326093">
<node ID="ID_249584985" CREATED="1608457329529" MODIFIED="1608457329529"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      nmcli connection delete &lt;网卡名&gt;
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
<node TEXT="新增网卡" ID="ID_1099393538" CREATED="1605185702086" MODIFIED="1608457345605">
<edge STYLE="horizontal"/>
<node TEXT="nmcli connection add type ethernet ifname eth0 con-name eth0&#xa;nmcli connection 添加 类型 以太网设备 指定网卡名称 名称 nmcli命令的命名为 名称" ID="ID_1866715578" CREATED="1608457336702" MODIFIED="1608457343676"/>
</node>
<node TEXT="手动配置网卡" ID="ID_1583896193" CREATED="1605185715911" MODIFIED="1608457358267">
<edge STYLE="horizontal"/>
<node TEXT="nmcli connection modify &lt;网卡名&gt; ipv4.method manual ipv4.addresses &lt;ip/掩码&gt; ipv4.gateway &lt;网关&gt; connection.autoconnetct yes&#xa;modify, 修改&#xa;ipv4.method,模式&#xa;manual, 手动配置&#xa;connection.autoconnetct, 自动链接" ID="ID_121501370" CREATED="1608457349222" MODIFIED="1608457356133"/>
</node>
<node TEXT="激活网卡" ID="ID_787820800" CREATED="1605185746423" MODIFIED="1608457367562">
<edge STYLE="horizontal"/>
<node TEXT="" ID="ID_559793498" CREATED="1608457362630" MODIFIED="1608457362630">
<node ID="ID_1842894700" CREATED="1608457364811" MODIFIED="1608457364811"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      nmcli connetction up &lt;网卡名&gt;
    </p>
  </body>
</html>
</richcontent>
</node>
</node>
</node>
</node>
<node TEXT="DNS配置" ID="ID_1611549369" CREATED="1604125825525" MODIFIED="1608457381560" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
<node TEXT="编辑/etc/resolv.conf文件中的内容&#xa;nameserver 8.8.8.8" ID="ID_1899126811" CREATED="1608457371450" MODIFIED="1608457374546"/>
</node>
<node TEXT="interfaces&#xa;配置文件" ID="ID_1029666266" CREATED="1604110488961" MODIFIED="1607593189591" COLOR="#006666" STYLE="bubble">
<font NAME="微软雅黑" SIZE="14"/>
<edge STYLE="horizontal"/>
<node TEXT="/etc/network/interfaces文件所在路径" ID="ID_291530160" CREATED="1604124285519" MODIFIED="1607593189597" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node TEXT="配置项&#xa;# The loopback interface&#xa;auto lo&#xa;iface lo inet loopback&#xa;# This line ensures that the interface will be brought up during boot.&#xa;auto eth0&#xa;iface eth0 inet static&#xa;address 192.168.2.239&#xa;netmask 255.255.255.0&#xa;gateway 192.168.2.1" ID="ID_85112656" CREATED="1604124376056" MODIFIED="1607593189599" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node TEXT="systemctl restart network重启network服务使配置生效" ID="ID_352587422" CREATED="1604125092326" MODIFIED="1607593189602" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
</node>
</node>
<node TEXT="常见问题" ID="ID_975374576" CREATED="1604125630806" MODIFIED="1607593189602" COLOR="#cc0000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="16"/>
<edge STYLE="horizontal"/>
<node TEXT="linux中常常包含多个网络服务工具&#xa;并且同时只能使用其中一个,比如&#xa;networkmanager跟interfaces所属&#xa;network.service如果&#xa;都进行配置并处于启动状态,&#xa;interfaces中的配置就无效了,并且&#xa;networkmanager也无法正常工作&#xa;本地网络会处于不可用的状态." ID="ID_1913781469" CREATED="1604125640145" MODIFIED="1607593189605" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node ID="ID_1366932417" CREATED="1604126590227" MODIFIED="1607593189606" STYLE="bubble"><richcontent TYPE="NODE">

<html>
  <head>
    
  </head>
  <body>
    <p>
      在不同的Linux发行版中网络配置文件
    </p>
    <p>
      可能是不同的,centos中不是用
    </p>
    <p>
      interfaces进行配置而是用
    </p>
    <p>
      <strong>/etc/sysconfig/network-scripts/ifcfg-eth0 </strong>
    </p>
    <p>
      文件进行配置
    </p>
  </body>
</html>
</richcontent>
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
</node>
</node>
<node TEXT="链路聚合（网卡组队）" POSITION="right" ID="ID_948505595" CREATED="1606282650905" MODIFIED="1608457450651">
<edge STYLE="horizontal"/>
<node TEXT="特点" ID="ID_1752346106" CREATED="1608378619526" MODIFIED="1608378624201">
<node TEXT="作用:备份网卡设备,提高可靠性&#xa;参考man teamd.conf中的example" ID="ID_1457310754" CREATED="1608378624234" MODIFIED="1608378626854"/>
</node>
<node TEXT="创建聚合" ID="ID_120737485" CREATED="1608457499993" MODIFIED="1608457517501">
<node TEXT="nmcli 连接 添加 类型 组队 网卡名 team0 命名为 team0 每次开机自动启动 工作方式 活跃备份" ID="ID_599241624" CREATED="1608378639634" MODIFIED="1608378645950">
<node TEXT="nmcli connection add type team ifname team0 con-name team0 autoconnect yes config &apos;{&quot;runner&quot;:{&quot;name&quot;:&quot;activebackup&quot;}}&apos;" ID="ID_419961873" CREATED="1606282751257" MODIFIED="1608378649352">
<edge STYLE="horizontal"/>
</node>
</node>
</node>
<node TEXT="添加成员" ID="ID_617453522" CREATED="1606282918053" MODIFIED="1608378659631">
<edge STYLE="horizontal"/>
<node TEXT="nmcli connection add type team-slave autoconnect yes ifname eth1 con-name team0-1 master team0&#xa;nmcli connection add type team-slave autoconnect yes ifname eth2 con-name team0-2 master team0&#xa;nmcli 连接 添加 类型 组队-成员 每次开机自动启用 网卡名 eth2 命名为 team0-2 主设备为 team0" ID="ID_1736612251" CREATED="1608378655330" MODIFIED="1608378657821"/>
</node>
<node TEXT="激活" ID="ID_550239719" CREATED="1606282967299" MODIFIED="1608378723974">
<edge STYLE="horizontal"/>
<node TEXT="nmcli connection up team0&#xa;nmcli connection up team0-1&#xa;nmcli connection up team0-2" ID="ID_1563384248" CREATED="1608378689088" MODIFIED="1608378703377"/>
</node>
<node TEXT="配置ip" ID="ID_39584569" CREATED="1606283046864" MODIFIED="1608378757010">
<edge STYLE="horizontal"/>
<node TEXT="nmcli connection modify team0 ipv4.method manual ipv4.addresses 192.168.1.1/24 connection.autoconnect yes&#xa;nmcli connection up team0" ID="ID_1518690210" CREATED="1608378745424" MODIFIED="1608378753839"/>
</node>
<node TEXT="teamdctl team0 state查看team0状态" ID="ID_1311306687" CREATED="1606283155083" MODIFIED="1607593189714">
<edge STYLE="horizontal"/>
</node>
</node>
<node TEXT="辅助命令" POSITION="right" ID="ID_609738100" CREATED="1604111197782" MODIFIED="1607593189714" COLOR="#660033" STYLE="bubble">
<font NAME="微软雅黑" SIZE="20"/>
<edge STYLE="horizontal"/>
<node TEXT="查看ip地址" ID="ID_1360603557" CREATED="1608378770895" MODIFIED="1608378774007">
<node TEXT="ip address show" ID="ID_1091086361" CREATED="1605529897512" MODIFIED="1608378777897">
<edge STYLE="horizontal"/>
</node>
</node>
<node TEXT="临时添加ip地址" ID="ID_1511058704" CREATED="1608378784136" MODIFIED="1608378786555">
<node TEXT="ip address add ip/掩码 dev 网卡名" ID="ID_1022781454" CREATED="1605529919788" MODIFIED="1608378788489">
<edge STYLE="horizontal"/>
</node>
</node>
<node TEXT="ping" ID="ID_1572158857" CREATED="1604111211412" MODIFIED="1607593189728" COLOR="#000066" STYLE="bubble">
<font NAME="微软雅黑" SIZE="16"/>
<edge STYLE="horizontal"/>
<node TEXT="ping 127.0.0.1&#xa;测试本地网卡是否可用" ID="ID_771564332" CREATED="1604112556763" MODIFIED="1607593189732" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node TEXT="ping 域名&#xa;测试广域网是否可用" ID="ID_618392101" CREATED="1604112597876" MODIFIED="1607593189734" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node TEXT="ping &lt;ip&gt;&#xa;测试与对应ip的节点连通性" ID="ID_182310489" CREATED="1604112637799" MODIFIED="1607593189735" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node TEXT="-c 设定ping发送的包数" ID="ID_684609341" CREATED="1606138912382" MODIFIED="1608378802255">
<edge STYLE="horizontal"/>
<node TEXT="ping -c 4 192.168.4.7" ID="ID_1979040184" CREATED="1608378797480" MODIFIED="1608378800257"/>
</node>
</node>
<node TEXT="ifup" ID="ID_1814039789" CREATED="1605410492507" MODIFIED="1607593189736">
<edge STYLE="horizontal"/>
<node TEXT="激活网卡" ID="ID_687698860" CREATED="1605410528207" MODIFIED="1607593189737">
<edge STYLE="horizontal"/>
</node>
</node>
<node TEXT="ifdown" ID="ID_5204221" CREATED="1605410495726" MODIFIED="1607593189737">
<edge STYLE="horizontal"/>
<node TEXT="取消激活" ID="ID_1166620300" CREATED="1605410535576" MODIFIED="1607593189737">
<edge STYLE="horizontal"/>
</node>
</node>
</node>
<node TEXT="思科路由器配置" POSITION="right" ID="ID_1486909855" CREATED="1604120204355" MODIFIED="1608457421218" COLOR="#000066" STYLE="bubble">
<font NAME="微软雅黑" SIZE="18"/>
<edge STYLE="horizontal"/>
<node TEXT="模式" ID="ID_1221829490" CREATED="1604120473543" MODIFIED="1607593189636" COLOR="#666600" STYLE="bubble">
<font NAME="微软雅黑" SIZE="16"/>
<edge STYLE="horizontal"/>
<node TEXT="正常模式" ID="ID_174193849" CREATED="1604120503541" MODIFIED="1607593189662" COLOR="#006666" STYLE="bubble">
<font NAME="微软雅黑" SIZE="14"/>
<edge STYLE="horizontal"/>
<node TEXT="打开路由器命令行默认进入" ID="ID_1089958920" CREATED="1604122941071" MODIFIED="1607593189666" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
</node>
<node TEXT="特权模式" ID="ID_1138021772" CREATED="1604120527853" MODIFIED="1607593189666" COLOR="#006666" STYLE="bubble">
<font NAME="微软雅黑" SIZE="14"/>
<edge STYLE="horizontal"/>
<node TEXT="正常模式下enable进入" ID="ID_1901117850" CREATED="1604120553922" MODIFIED="1607593189672" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node TEXT="wr或write保存当前配置" ID="ID_1626320721" CREATED="1604120623188" MODIFIED="1607593189673" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node TEXT="show查看信息&#xa;show version查看设备信息&#xa;show run查看当前配置&#xa;show in interface brief查看接口信息" ID="ID_1001146719" CREATED="1604120872614" MODIFIED="1607593189674" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
</node>
<node TEXT="全局模式" ID="ID_1926258873" CREATED="1604120534423" MODIFIED="1607593189675" COLOR="#006666" STYLE="bubble">
<font NAME="微软雅黑" SIZE="14"/>
<edge STYLE="horizontal"/>
<node TEXT="特权模式下configure terminal进入" ID="ID_954570911" CREATED="1604121078907" MODIFIED="1607593189686" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node TEXT="dhcp配置" ID="ID_407503363" CREATED="1604121252353" MODIFIED="1607593189689" COLOR="#660066" STYLE="bubble">
<font NAME="微软雅黑" SIZE="14"/>
<edge STYLE="horizontal"/>
<node TEXT="ip dhcp pool &lt;ip池&gt;创建ip池" ID="ID_1860143773" CREATED="1604121290987" MODIFIED="1607593189696" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node TEXT="network &lt;网段&gt; &lt;子网掩码&gt;为ip池分配网段" ID="ID_1891913498" CREATED="1604121332893" MODIFIED="1607593189698" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node TEXT="default-router &lt;网关&gt;指定分配的网关" ID="ID_2209917" CREATED="1604121484227" MODIFIED="1607593189699" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node TEXT="no default-router &lt;网关&gt;清除指定网关" ID="ID_1584469824" CREATED="1604121560474" MODIFIED="1607593189700" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node TEXT="dns-server &lt;dns服务器ip&gt;指定配置的dns" ID="ID_880510374" CREATED="1604122831312" MODIFIED="1607593189702" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
</node>
<node TEXT="ip route &lt;网段&gt; &lt;子网掩码&gt; &lt;网关&gt;添加静态路由&#xa;指定路由器可访问的网段" ID="ID_116929749" CREATED="1604121599129" MODIFIED="1607593189702" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
</node>
<node TEXT="接口模式" ID="ID_968810521" CREATED="1604120539266" MODIFIED="1607593189703" COLOR="#006666" STYLE="bubble">
<font NAME="微软雅黑" SIZE="14"/>
<edge STYLE="horizontal"/>
<node TEXT="全局模式下interface &lt;接口名&gt; &lt;接口号&gt;进入" ID="ID_1952259597" CREATED="1604122033998" MODIFIED="1607593189705" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node TEXT="shutdown关闭接口" ID="ID_1364059357" CREATED="1604122101032" MODIFIED="1607593189706" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node TEXT="no shutdown开启接口" ID="ID_1252052623" CREATED="1604122111540" MODIFIED="1607593189706" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node TEXT="ip address &lt;ip&gt; &lt;子网掩码&gt;配置ip" ID="ID_740610834" CREATED="1604121145109" MODIFIED="1607593189707" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node TEXT="no ip address &lt;ip&gt; &lt;子网掩码&gt;清除ip" ID="ID_1644571009" CREATED="1604122262484" MODIFIED="1607593189707" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
</node>
</node>
<node TEXT="接口类型" ID="ID_1028520819" CREATED="1604121752765" MODIFIED="1607593189707" COLOR="#666600" STYLE="bubble">
<font NAME="微软雅黑" SIZE="16"/>
<edge STYLE="horizontal"/>
<node TEXT="fastEthernet：百兆接口" ID="ID_328124648" CREATED="1604121770060" MODIFIED="1607593189708" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node TEXT="gigabitEghernet：千兆接口" ID="ID_1033659856" CREATED="1604121809206" MODIFIED="1607593189708" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
<node TEXT="接口号从0/0开始" ID="ID_486020442" CREATED="1604121989817" MODIFIED="1607593189709" COLOR="#000000" STYLE="bubble">
<font NAME="微软雅黑" SIZE="12"/>
<edge STYLE="horizontal"/>
</node>
</node>
</node>
<node TEXT="VPN配置" POSITION="right" ID="ID_973940350" CREATED="1608554838841" MODIFIED="1608554850439">
<edge COLOR="#ff00ff"/>
<node TEXT="GRE VPN" ID="ID_1220513977" CREATED="1608554850454" MODIFIED="1608554860980">
<node TEXT="特点" ID="ID_1675540023" CREATED="1608554860995" MODIFIED="1608554866240">
<node TEXT="集成在linux内核模块中,配置简单" ID="ID_1014231469" CREATED="1608554866240" MODIFIED="1608554898874"/>
</node>
<node TEXT="配置" ID="ID_1002159839" CREATED="1608554916638" MODIFIED="1608554919475">
<node TEXT="启用GRE模块" ID="ID_1687231088" CREATED="1608554919491" MODIFIED="1608554937335">
<node TEXT="modprobe ip_gre" ID="ID_1517209822" CREATED="1608554937357" MODIFIED="1608554975635"/>
<node TEXT="modinfo ip_gre  //查看模块信息" ID="ID_1910008226" CREATED="1608554986275" MODIFIED="1608555001821"/>
</node>
<node TEXT="创建隧道" ID="ID_392401846" CREATED="1608555009330" MODIFIED="1608555035520">
<node TEXT="ip tunnel add tun0 mode gre remote 201.1.2.5 local 201.1.2.10  //local前为对方IP,后为本机IP" ID="ID_1040921834" CREATED="1608555035520" MODIFIED="1608555134931"/>
<node TEXT="ip tunnel help  //查看帮助" ID="ID_969879959" CREATED="1608555135563" MODIFIED="1608555147985"/>
</node>
<node TEXT="启用隧道" ID="ID_448353246" CREATED="1608555150197" MODIFIED="1608555155727">
<node TEXT="ip link show  //查看网络连接信息" ID="ID_1003829032" CREATED="1608555155743" MODIFIED="1608555184769"/>
<node TEXT="ip link set tun0 up  //启用隧道" ID="ID_1420482179" CREATED="1608555185069" MODIFIED="1608555202397"/>
</node>
<node TEXT="为vpn配置隧道地址" ID="ID_395565825" CREATED="1608555213076" MODIFIED="1608555222433">
<node TEXT="ip addr add 10.10.10.10/24 peer 10.10.10.5/24 dev tun0  //peer前为本机地址,后为对方地址,IP地址可以自定义私有IP" ID="ID_6474152" CREATED="1608555222448" MODIFIED="1608555315535"/>
</node>
<node TEXT="客户机做以上相同步骤" ID="ID_1941803641" CREATED="1608555349336" MODIFIED="1608555382595"/>
</node>
</node>
<node TEXT="PPTP VPN" ID="ID_1199233651" CREATED="1608555396560" MODIFIED="1608555401939">
<node TEXT="特点" ID="ID_1870598626" CREATED="1608555401955" MODIFIED="1608555419352">
<node TEXT="由pptpd包提供,跨平台,windows自带,支持身份验证" ID="ID_1368251166" CREATED="1608555419616" MODIFIED="1608555476534"/>
</node>
<node TEXT="配置" ID="ID_98817457" CREATED="1608555456046" MODIFIED="1608555464886">
<node TEXT="安装部署" ID="ID_956425064" CREATED="1608555478823" MODIFIED="1608555573800">
<node TEXT="pptpd , ppp" ID="ID_291647893" CREATED="1608555564629" MODIFIED="1608555603677"/>
</node>
<node TEXT="/etc/pptpd.conf" ID="ID_703161068" CREATED="1608555614577" MODIFIED="1608555652497">
<node TEXT="...&#xa;localip 201.1.2.5  //服务器本地IP&#xa;remoteip 192.168.3.1-50  //分配给客户端的IP池&#xa;..." ID="ID_358465088" CREATED="1608555652515" MODIFIED="1608555920092"/>
</node>
<node TEXT="/etc/ppp/options.pptpd" ID="ID_353461296" CREATED="1608555712582" MODIFIED="1608555729740">
<node TEXT="require-mppe-128  //使用MPPE加密数据&#xa;ms-dns 8.8.8.8  //DNS服务器根据情况而定" ID="ID_1762543745" CREATED="1608555729771" MODIFIED="1608555892127"/>
</node>
<node TEXT="/etc/ppp/chap-secrets" ID="ID_742339047" CREATED="1608555762183" MODIFIED="1608555775254">
<node TEXT="jacob * 123456 *  //设置账户,第一个*表示任意服务器IP,第二个*表示任意客户端IP" ID="ID_1507651432" CREATED="1608555775269" MODIFIED="1608555859422"/>
</node>
<node TEXT="启动服务" ID="ID_690228265" CREATED="1608555931697" MODIFIED="1608555935275">
<node TEXT="systemctl start pptpd" ID="ID_918599737" CREATED="1608555935290" MODIFIED="1608555947104"/>
<node TEXT="systemctl enable pptpd" ID="ID_797740504" CREATED="1608555948508" MODIFIED="1608555959419"/>
</node>
<node TEXT="翻墙设置" ID="ID_1378676017" CREATED="1608555966236" MODIFIED="1608555974587">
<node TEXT="echo &quot;1&quot; &gt; /proc/sys/net/ipv4/ip_forward  //开启路由转发" ID="ID_1935484437" CREATED="1608555974603" MODIFIED="1608556004950"/>
<node TEXT="iptables -t nat -A POSTROUTING -s 192.168.3.0/24 -j SNAT --to-source 201.1.2.5  //防火墙放行" ID="ID_778544942" CREATED="1608556010153" MODIFIED="1608556086898"/>
</node>
</node>
</node>
<node TEXT="L2TP+IPSec VPN" ID="ID_962889291" CREATED="1608556978125" MODIFIED="1608557005525">
<node TEXT="高安全性,支持身份验证,跨平台" ID="ID_242659941" CREATED="1608557005541" MODIFIED="1608557068046"/>
<node TEXT="安装部署" ID="ID_972462981" CREATED="1608557068949" MODIFIED="1608557072574">
<node TEXT="libreswan" ID="ID_346459127" CREATED="1608557072589" MODIFIED="1608557232299"/>
<node TEXT="/etc/ipsec.conf  //默认配置即可" ID="ID_1774216373" CREATED="1608557235408" MODIFIED="1608557279517"/>
</node>
<node TEXT="加载配置文件" ID="ID_731936921" CREATED="1608557286649" MODIFIED="1608557300753">
<node TEXT="include /etc/ipsec.d/*.conf" ID="ID_9482500" CREATED="1608557300768" MODIFIED="1608557323123"/>
</node>
<node TEXT="/etc/ipse.d/myipsec.conf" ID="ID_1644614853" CREATED="1608557327234" MODIFIED="1608557345987">
<node TEXT="conn IDC-PSK-NAT&#xa;    rightsubnet=vhost:%priv&#xa;    also=IDC-PSK-noNAT&#xa;conn IDC-PSK-noNAT&#xa;    authby=secret       //加密认证&#xa;        ike=3des-sha1;modp1024       //加密算法&#xa;        phase2alg=aes256-sha1;modp2048    //加密算法&#xa;    pfs=no&#xa;    auto=add&#xa;    keyingtries=3&#xa;    rekey=no&#xa;    ikelifetime=8h&#xa;    keylife=3h&#xa;    type=transport&#xa;    left=201.1.2.10     //重要，服务器本机的外网IP&#xa;    leftprotoport=17/1701&#xa;    right=%any      //允许任何客户端连接&#xa;    rightprotoport=17/%any" ID="ID_51964153" CREATED="1608557346003" MODIFIED="1608557411911"/>
</node>
<node TEXT="/etc/ipsec.secrets" ID="ID_1266142600" CREATED="1608557429624" MODIFIED="1608557449118">
<node TEXT="include /etc/ipsec.d/*.secrets&#xa;201.1.2.10   %any:    PSK    &quot;randpass&quot;     //randpass为预共享密钥&#xa;//201.1.2.10是VPN服务器的IP&#xa;//%any:任何客户端都可以连接服务器&#xa;//PSK（pre share key）中文预共享密钥" ID="ID_1307769893" CREATED="1608557449140" MODIFIED="1608557477323"/>
</node>
<node TEXT="启动IPSec" ID="ID_636794495" CREATED="1608557484517" MODIFIED="1608557496169">
<node TEXT="systemctl start ipsec" ID="ID_517552533" CREATED="1608557496200" MODIFIED="1608557511970"/>
<node TEXT="查看服务状态" ID="ID_1735331054" CREATED="1608557512293" MODIFIED="1608557519827">
<node TEXT="netstat -ntulp | grep 500" ID="ID_1348521037" CREATED="1608557519843" MODIFIED="1608557537048"/>
</node>
</node>
<node TEXT="部署XL2TP" ID="ID_1271120406" CREATED="1608557545870" MODIFIED="1608557554147">
<node TEXT="安装xl2tpd" ID="ID_1105297655" CREATED="1608557560726" MODIFIED="1608557575051"/>
<node TEXT="/etc/xl2tpd/xl2tpd.conf" ID="ID_1697242075" CREATED="1608557578612" MODIFIED="1608557599605">
<node TEXT="[global]&#xa;.. ..&#xa;[lns default]&#xa;.. ..&#xa;ip range = 192.168.3.128-192.168.3.254     //分配给客户端的IP池&#xa;local ip = 201.1.2.10  //VPN服务器IP地址" ID="ID_8167190" CREATED="1608557600523" MODIFIED="1608557651266"/>
</node>
<node TEXT="/etc/ppp/options.xl2tpd" ID="ID_859769232" CREATED="1608557660834" MODIFIED="1608557672046">
<node TEXT="require-mschap-v2                                         //添加一行，强制要求认证&#xa;#crtscts                                                //注释或删除该行&#xa;#lock                                                //注释或删除该行" ID="ID_701897276" CREATED="1608557672062" MODIFIED="1608557694368"/>
</node>
<node TEXT="/etc/ppp/chap-secrets" ID="ID_433490498" CREATED="1608557700412" MODIFIED="1608557712928">
<node TEXT="jacob   *       123456  *      //账户名称   服务器名称   密码   客户端IP" ID="ID_144349836" CREATED="1608557712944" MODIFIED="1608557730670"/>
</node>
<node TEXT="启动服务" ID="ID_1447082482" CREATED="1608557739190" MODIFIED="1608557744049">
<node TEXT="systemctl start xl2tpd" ID="ID_1187166612" CREATED="1608557744064" MODIFIED="1608557760204"/>
<node TEXT="ss -ntulp | grep xl2tpd  //查看服务状态" ID="ID_839869927" CREATED="1608557760558" MODIFIED="1608557780923"/>
</node>
<node TEXT="翻墙设置" ID="ID_1840109427" CREATED="1608557784732" MODIFIED="1608557791419">
<node TEXT="echo &quot;1&quot; &gt; /proc/sys/net/ipv4/ip_forward  //开启路由转发" ID="ID_557588728" CREATED="1608557791450" MODIFIED="1608557823082"/>
<node TEXT="iptables -t nat -A POSTROUTING -s 192.168.3.0/24 -j SNAT --to-source 201.1.2.10  //防火墙配置" ID="ID_1099272953" CREATED="1608557823313" MODIFIED="1608557874342"/>
</node>
<node TEXT="windows客户端配置" ID="ID_1352548838" CREATED="1608557900279" MODIFIED="1608557909665">
<node TEXT="修改注册表" ID="ID_924973373" CREATED="1608557909686" MODIFIED="1608557934080">
<node TEXT="HKEY_LOCAL_MACHINE\ System\CurrentControlSet\Services\Rasman\Parameters" ID="ID_1729420162" CREATED="1608557934096" MODIFIED="1608557946079"/>
<node TEXT="新建DWORD,名称设为ProhibitlpSec,值为1" ID="ID_283436845" CREATED="1608557946674" MODIFIED="1608558004699"/>
</node>
<node TEXT="重启" ID="ID_945327865" CREATED="1608558006551" MODIFIED="1608558010045"/>
</node>
</node>
</node>
</node>
</node>
</map>
