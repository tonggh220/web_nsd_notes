<map version="freeplane 1.8.0">
<!--To view this file, download free mind mapping software Freeplane from http://freeplane.sourceforge.net -->
<node TEXT="用户与用户组" FOLDED="false" ID="ID_851486128" CREATED="1605269180303" MODIFIED="1608367732844" STYLE="oval">
<font SIZE="18"/>
<hook NAME="MapStyle" zoom="0.829">
    <properties fit_to_viewport="false" edgeColorConfiguration="#808080ff,#ff0000ff,#0000ffff,#00ff00ff,#ff00ffff,#00ffffff,#7c0000ff,#00007cff,#007c00ff,#7c007cff,#007c7cff,#7c7c00ff"/>

<map_styles>
<stylenode LOCALIZED_TEXT="styles.root_node" STYLE="oval" UNIFORM_SHAPE="true" VGAP_QUANTITY="24.0 pt">
<font SIZE="24"/>
<stylenode LOCALIZED_TEXT="styles.predefined" POSITION="right" STYLE="bubble">
<stylenode LOCALIZED_TEXT="default" ICON_SIZE="12.0 pt" COLOR="#000000" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt" NUMBERED="true" BORDER_WIDTH="2.0 px">
<font NAME="微软雅黑" SIZE="12" BOLD="false" ITALIC="false"/>
<edge STYLE="horizontal"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.details" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt"/>
<stylenode LOCALIZED_TEXT="defaultstyle.attributes" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font SIZE="9"/>
</stylenode>
<stylenode LOCALIZED_TEXT="defaultstyle.note" COLOR="#000000" BACKGROUND_COLOR="#ffffff" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt" TEXT_ALIGN="LEFT"/>
<stylenode LOCALIZED_TEXT="defaultstyle.floating">
<edge STYLE="hide_edge"/>
<cloud COLOR="#f0f0f0" SHAPE="ROUND_RECT"/>
</stylenode>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.user-defined" POSITION="right" STYLE="bubble">
<stylenode LOCALIZED_TEXT="styles.topic" COLOR="#18898b" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font NAME="Liberation Sans" SIZE="10" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.subtopic" COLOR="#cc3300" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font NAME="Liberation Sans" SIZE="10" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.subsubtopic" COLOR="#669900" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font NAME="Liberation Sans" SIZE="10" BOLD="true"/>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.important" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<icon BUILTIN="yes"/>
</stylenode>
</stylenode>
<stylenode LOCALIZED_TEXT="styles.AutomaticLayout" POSITION="right" STYLE="bubble">
<stylenode LOCALIZED_TEXT="AutomaticLayout.level.root" COLOR="#000000" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font SIZE="18"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,1" COLOR="#0033ff" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font SIZE="16"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,2" COLOR="#00b439" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font SIZE="14"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,3" COLOR="#990000" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font SIZE="12"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,4" COLOR="#111111" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt">
<font SIZE="10"/>
</stylenode>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,5" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt"/>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,6" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt"/>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,7" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt"/>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,8" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt"/>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,9" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt"/>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,10" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt"/>
<stylenode LOCALIZED_TEXT="AutomaticLayout.level,11" STYLE="bubble" SHAPE_HORIZONTAL_MARGIN="5.0 pt" SHAPE_VERTICAL_MARGIN="3.0 pt"/>
</stylenode>
</stylenode>
</map_styles>
</hook>
<hook NAME="AutomaticEdgeColor" COUNTER="2" RULE="ON_BRANCH_CREATION"/>
<node TEXT="用户管理" POSITION="right" ID="ID_1625421570" CREATED="1605269302837" MODIFIED="1605269310742">
<edge COLOR="#ff0000"/>
<node TEXT="分类" ID="ID_1900643109" CREATED="1605269314017" MODIFIED="1605269711214">
<node TEXT="管理员" ID="ID_817974514" CREATED="1605269348689" MODIFIED="1608368218679">
<node TEXT="root/管理员UID为0,具有最高权限,不受权限机制限制" ID="ID_721234987" CREATED="1608368211648" MODIFIED="1608368216477"/>
</node>
<node TEXT="系统用户" ID="ID_1398655464" CREATED="1605269358412" MODIFIED="1608368229421">
<node TEXT="UID为1~999,为系统创建给程序/服务使用" ID="ID_696546785" CREATED="1608368220954" MODIFIED="1608368226114"/>
</node>
<node TEXT="普通用户" ID="ID_531742198" CREATED="1605269362314" MODIFIED="1608368238226">
<node TEXT="UID从1000开始,默认60000数量上限,但可更改上限&#xa;权限有限,数据主要存放在家目录下" ID="ID_801360900" CREATED="1608368231041" MODIFIED="1608368236692"/>
</node>
</node>
<node TEXT="命令" ID="ID_40236138" CREATED="1605269952323" MODIFIED="1605269957170">
<node TEXT="创建用户" ID="ID_1343907980" CREATED="1605269965151" MODIFIED="1608368352863">
<node TEXT="相关配置文件" ID="ID_1314532176" CREATED="1608377805535" MODIFIED="1608377817979">
<node TEXT="/etc/default/useradd" ID="ID_656986536" CREATED="1608377818013" MODIFIED="1608377833206"/>
<node TEXT="/etc/login.defs" ID="ID_742662446" CREATED="1608377834359" MODIFIED="1608377846471"/>
</node>
<node TEXT="useradd 用户名  //以默认方式创建普通用户" ID="ID_419448577" CREATED="1605270195968" MODIFIED="1608368442399"/>
<node TEXT="useradd -u 用户名  //指定UID标记号" ID="ID_79500879" CREATED="1605270268569" MODIFIED="1608368401372"/>
<node TEXT="useradd -d 用户名  //指定家目录" ID="ID_1737065974" CREATED="1605270335668" MODIFIED="1608368431540"/>
<node TEXT="useradd -G 组名 用户名  //指定所属组,没有的组会自动创建" ID="ID_586943082" CREATED="1605270411110" MODIFIED="1608368464616"/>
<node TEXT="useradd -s 用户名  //指定用户的登录解释器默认为/bin/bash" ID="ID_614011123" CREATED="1605270469249" MODIFIED="1608368488181"/>
</node>
<node TEXT="修改用户配置" ID="ID_1649503197" CREATED="1605269984258" MODIFIED="1608368679531">
<node TEXT="usermod -l 用户名  //修改用户的登录名称" ID="ID_1976672337" CREATED="1605270588290" MODIFIED="1608368500298"/>
<node TEXT="usermod -u UID 用户名  //修改用户UID" ID="ID_1417073875" CREATED="1605270619147" MODIFIED="1608368512113"/>
<node TEXT="usermod -s 解释器 用户名  //修改用户登录解释器" ID="ID_313968170" CREATED="1605270634082" MODIFIED="1608368525573"/>
<node TEXT="usermod -d 家目录路径 用户名  //修改用户家目录此命令只针对/etc/passwd做修改,并不实际创建家目录" ID="ID_602130907" CREATED="1605270663680" MODIFIED="1608368552377"/>
<node TEXT="usermod -G 组名 用户名  //重置用户所属附加组" ID="ID_573227402" CREATED="1605270680243" MODIFIED="1608368564639"/>
</node>
<node TEXT="删除用户" ID="ID_399647819" CREATED="1605271948920" MODIFIED="1608368688624">
<node TEXT="userdel 用户名  //删除用户,但保留用户数据" ID="ID_1773481301" CREATED="1605271960853" MODIFIED="1608368582781"/>
<node TEXT="userdel -r 用户名  //删除用户,清除用户数据" ID="ID_1798964263" CREATED="1605271970267" MODIFIED="1608368593325"/>
</node>
<node TEXT="设置密码" ID="ID_585233612" CREATED="1605269991103" MODIFIED="1608368692094">
<node TEXT="passwd 用户名  /交互式设置用户密码,普通用户有密码复杂度要求,root用户不受限" ID="ID_1143067234" CREATED="1605271002318" MODIFIED="1608368615158"/>
<node TEXT="echo 密码 &gt; passwd --stdin 用户名  //非交互式设置方式,只有root用户可以用,执行后直接完成设置" ID="ID_1542219086" CREATED="1605271011994" MODIFIED="1608368632948"/>
</node>
<node TEXT="id 用户名  //查看用户基本信息" ID="ID_1383680042" CREATED="1605270510516" MODIFIED="1608368649559"/>
<node TEXT="切换用户" ID="ID_361469373" CREATED="1605271193016" MODIFIED="1608368716969">
<node TEXT="su  //普通用户使用时切换到root用户" ID="ID_751245562" CREATED="1605271197196" MODIFIED="1608368733413"/>
<node TEXT="su - 用户名  //切换到指定用户,root用户使用时不需要密码随意切换到任意用户" ID="ID_298640878" CREATED="1605271202483" MODIFIED="1608368748450"/>
</node>
</node>
<node TEXT="配置文件" ID="ID_676792767" CREATED="1605269957498" MODIFIED="1608368859568">
<node TEXT="特点" ID="ID_1516803151" CREATED="1608368766079" MODIFIED="1608368769820">
<node TEXT="修改配置文件一样达到效果&#xa;用户的初始配置文件根据&#xa;/etc/skel中的模板复制" ID="ID_1659830880" CREATED="1608368769836" MODIFIED="1608368777898"/>
</node>
<node TEXT="/etc/passwd" ID="ID_36810779" CREATED="1605270001335" MODIFIED="1608368791382">
<node TEXT="保存用户账号基本信息&#xa;每个用户记录一行,以:分为7个字段&#xa;用户名:密码占位符:UID:基本组GID:用户描述信息:家目录:解释器&#xa;登录解释器为/sbin/nologin时禁止用户登录" ID="ID_1802251186" CREATED="1608368785604" MODIFIED="1608368788275"/>
</node>
<node TEXT="/etc/shadow" ID="ID_1724455390" CREATED="1605270009516" MODIFIED="1608368801175">
<node TEXT="保存用户密码信息,每个用户一行以:分为9个字段&#xa;1, 用户名；2,加密后密码字符串；3, 上次修改密码时间&#xa;4, 密码最短有效天数,默认为0；&#xa;5, 密码最长有效天数,默认99999；&#xa;6, 密码过期提前警告天数,默认7&#xa;7, 密码过期多少天禁用此账号&#xa;8, 账号失效时间,默认为空&#xa;9, 保留字段" ID="ID_723826302" CREATED="1608368796834" MODIFIED="1608368799202"/>
</node>
<node TEXT="~/.bash_profile" ID="ID_541906049" CREATED="1605271751215" MODIFIED="1608368810412">
<node TEXT="每次登录系统时执行,定义初始化变量" ID="ID_442986246" CREATED="1608368806757" MODIFIED="1608368808710"/>
</node>
<node TEXT="~/.bashrc" ID="ID_1726517312" CREATED="1605271777447" MODIFIED="1608368817582">
<node TEXT="每次进入新的bash环境时执行,定义永久别名" ID="ID_437040346" CREATED="1608368814459" MODIFIED="1608368815994"/>
</node>
<node TEXT="/etc/bashrc,/etc/profile" ID="ID_490675394" CREATED="1605271877974" MODIFIED="1608368829294">
<node TEXT="全局配置文件,对所有用户有效" ID="ID_1912538616" CREATED="1608368822393" MODIFIED="1608368823897"/>
</node>
</node>
</node>
<node TEXT="用户组管理" POSITION="right" ID="ID_472808882" CREATED="1605269335476" MODIFIED="1608368880634">
<edge COLOR="#00ff00"/>
<node TEXT="分类" ID="ID_1444195428" CREATED="1605272125088" MODIFIED="1605272130233">
<node TEXT="基本组" ID="ID_367102411" CREATED="1605269370928" MODIFIED="1608368912393">
<node TEXT="由系统创建,与用户名相同,由系统将用户加入,GID与用户UID数值相同" ID="ID_1840474317" CREATED="1608368888337" MODIFIED="1608368903189"/>
</node>
<node TEXT="附加组/从属组" ID="ID_2134912" CREATED="1605269373914" MODIFIED="1608368922680">
<node TEXT="由root/管理员创建,由管理员将用户加入" ID="ID_403922419" CREATED="1608368918238" MODIFIED="1608368920443"/>
</node>
<node TEXT="特点" ID="ID_38601938" CREATED="1608368873463" MODIFIED="1608368876541">
<node TEXT="一个用户至少属于一个组" ID="ID_341795934" CREATED="1608368876557" MODIFIED="1608368878814"/>
</node>
</node>
<node TEXT="管理" ID="ID_913520614" CREATED="1605272131003" MODIFIED="1605272138912">
<node TEXT="命令" ID="ID_1875403304" CREATED="1605272141197" MODIFIED="1605272144267">
<node TEXT="创建组" ID="ID_1557289854" CREATED="1605272176983" MODIFIED="1608368958212">
<node TEXT="grouadd 组名  //-g指定组gid" ID="ID_107221788" CREATED="1608368958227" MODIFIED="1608370266161"/>
</node>
<node TEXT="修改组配置" ID="ID_168835937" CREATED="1605272187705" MODIFIED="1608368977676">
<node TEXT="gpasswd -a 用户名 组名  //将用户加入组,每次只能一个" ID="ID_204595687" CREATED="1605272475073" MODIFIED="1608369021747"/>
<node TEXT="gpasswd -d 用户名 组名  //将用户移出组,每次一个" ID="ID_786917045" CREATED="1605272505229" MODIFIED="1608369038956"/>
<node TEXT="gpasswd -M &apos;用户名 ...&apos; 组名  //定义组成员列表,可批量,&apos;单引号内为空&apos;,则清除组所有成员" ID="ID_1100583177" CREATED="1605272524086" MODIFIED="1608369080988"/>
<node TEXT="gpasswd -A 用户名 组名  //定义组管理员列表,仅root用户可用,组管理员可以不是组成员,有权增删组成员" ID="ID_768887110" CREATED="1605272786051" MODIFIED="1608369094173"/>
</node>
<node TEXT="groupdel 组名  //删除组,但不能删除用户基本组" ID="ID_644697800" CREATED="1605272204038" MODIFIED="1608369114050"/>
</node>
<node TEXT="配置文件" ID="ID_1750522836" CREATED="1605272144485" MODIFIED="1605272147391">
<node TEXT="/etc/group  //保存组账号基本信息,每个组记录一行,以:分为4个字段,组名:组密码占位符:GID:组成员列表" ID="ID_293226924" CREATED="1605272346367" MODIFIED="1608369137425"/>
<node TEXT="/etc/gshadow  //保存组账号管理信息,以:分为4个字段,每个组一行,组名:组密码加密字符串:组管理员列表:组成员列表" ID="ID_1153607762" CREATED="1605272356715" MODIFIED="1608369153231"/>
</node>
</node>
</node>
</node>
</map>
